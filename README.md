# Music Video Visualizer
é€™æ˜¯ä¸€å€‹ç”¨ Python è£½ä½œçš„ éŸ³æ¨‚æ³¢æµª(Wave)è¦–è¦ºåŒ–å·¥å…·ï¼Œå¯å¾ .wav æª”æ¡ˆä¸­æå–éŸ³è¨Šå…§å®¹ï¼Œä¸¦æ ¹æ“š RMS(Root Mean Square)éŸ³é‡ è¨ˆç®—ç”Ÿæˆå°æ‡‰æ³¢å½¢å‹•ç•«ã€‚
åŒæ™‚ï¼Œæ”¯æŒæ­é…æ’­æ”¾ .mp4 ã€éŸ³æª”ï¼Œ**å°‡æ³¢æµªå‹•ç•«çœŸæ­£åŒæ­¥æ¸²æŸ“åœ¨ MV ç•«é¢ä¸­**ã€‚

ä½¿ç”¨è€…å¯ä»¥é€é `config.json` èª¿æ•´æœ€çµ‚è¼¸å‡ºæ•ˆæœçš„æ¨£å¼èˆ‡è¡Œç‚ºã€‚
æ”¯æ´å½±ç‰‡èƒŒæ™¯ / éŸ³è¨ŠåŒæ­¥æ’­æ”¾ / è‡ªè¨‚ bar æ•ˆæœï¼Œé‚„èƒ½åˆ‡æ›é¡¯ç¤ºåƒæ•¸ï¼

## èƒŒæ™¯
æœ€è¿‘ä¸çŸ¥é“ç‚ºä»€éº¼[é•·è™Ÿå† è»(Trombone Champ)](https://store.steampowered.com/app/1059990/Trombone_Champ/?l=tchinese)å¾ˆç´…ï¼Œä¸€ç›´åœ¨ytåˆ·åˆ°ï¼Œå°±å¾ˆå¥½å¥‡ä»–çš„é•·è™Ÿæ˜¯æ€éº¼ç™¼å‡ºè²éŸ³çš„(ä»–çš„è²éŸ³æ˜¯ç·šæ€§ç™¼è²ï¼Œéå›ºå®šéŸ³æª”)ï¼Œæ‰€ä»¥å°±å•äº†aiï¼Œä»–è·Ÿæˆ‘èªªå…¶å¯¦ç¨‹å¼ä¹Ÿå¯ä»¥å¼„å‡ºç·šæ€§ç™¼è²ï¼Œè€Œä¸ç”¨å›ºå®šéŸ³æª”ã€‚

(~~é›–ç„¶é€™ä¸æ˜¯é‡é»~~)

ä½†é€™è®“æˆ‘è¯æƒ³åˆ°å¦ä¸€å€‹å•é¡Œï¼š
> éŸ³æ¨‚è¦–è¦ºåŒ–(Waveform)åˆ°åº•æ˜¯æ€éº¼å¯¦ä½œçš„ï¼Ÿ

> ç¸½ä¸å¯èƒ½éŸ³æ¨‚åœ¨é‚£æ’­ï¼Œæ³¢æµªåœ¨é‚£çäº‚è·³å§ï¼Ÿ

æ–¼æ˜¯æˆ‘å°±ç¹¼çºŒé€£åŒTrombone Champå•äº†aiï¼Œä»–è·Ÿæˆ‘èªªå¯¦éš›æŠ€è¡“å°±æ˜¯æå–.wav(æˆ–å…¶ä»–éŸ³æª”)ä¸­çš„è³‡æ–™ä½œåˆ†æå•¦

æ–¼æ˜¯æœ¬å°ˆæ¡ˆå°±èª•ç”Ÿäº†ï¼

# Features
- æ”¯æ´ å½±ç‰‡èƒŒæ™¯æ’­æ”¾(.mp4) [å¯é¸]

- éŸ³è¨Šæ’­æ”¾ + è‡ªå‹•è¦–è¦ºåŒ–(rms æ¢ç´‹å‹•ç•«) [å¯é¸]

- å¯è‡ªè¨‚èƒŒæ™¯åœ–(ç•¶mp4è¨­å®šç‚ºé—œé–‰æ™‚å•Ÿç”¨)

- å®Œå…¨è‡ªè¨‚çš„æ¨£å¼ï¼ˆbar é¡è‰²ã€ä½ç½®ã€é«˜åº¦ï¼‰

- ä½¿ç”¨ config.json å¿«é€Ÿèª¿æ•´åƒæ•¸(ç„¡éœ€æ”¹ç¨‹å¼ç¢¼)

# å®‰è£æ–¹å¼(Installation)
1. å®‰è£ Python å¥—ä»¶
```bash
pip install -r requirements.txt
```

2. æº–å‚™ä»¥ä¸‹æª”æ¡ˆ
- `default_background.jpg`: é è¨­èƒŒæ™¯åœ–(å¯é¸ï¼Œæ”¾ç½®æ–¼`main.py`åŒç´šè³‡æ–™å¤¾)
- `.wav`æª”æ¡ˆ(ä¸éœ€æ”¹æª”åï¼Œæ”¾ç½®æ–¼`\video_files`)
- `.mp4`æª”æ¡ˆ(ä¸éœ€æ”¹æª”åï¼Œæ”¾ç½®æ–¼`\video_files`)

# ä½¿ç”¨æ–¹å¼(Usage)
## RMS_generator.py
### åƒæ•¸
æœ¬æª”æ¡ˆåœ¨å•Ÿå‹•æ™‚å¯æ·»åŠ åƒæ•¸(å¯é¸)
```bash
python RMS_generator.py --vl_str value[float]
```

æ­¤è¨­å®šå¯æŒ‡å®š**éŸ³æ³¢çš„æ•æ„Ÿåº¦(å¼·åº¦è¡¨ç¾)**
> æ•¸å­—è¶Šå¤§ï¼Œåˆ†æå°éŸ³æ³¢çš„ã€Œå·®ç•°æ„ŸçŸ¥ã€è¶Šå¼±(è¶Šä¸æ•æ„Ÿ)

éŸ³æ³¢æ•æ„Ÿåº¦çš„è¨ˆç®—æ–¹å¼æ¡ç”¨ [Generalised Meanï¼ˆä¸€èˆ¬åŒ–å¹³å‡ï¼‰](https://en.wikipedia.org/wiki/Generalized_mean)ï¼š
$\left(\frac{1}{n}\sum_{i=1}^{n}|x_i|^{s}\right)^{1/s}$

å…¶ä¸­
${x_i}$ ç‚º éŸ³æ¨‚çš„æ¨£æœ¬(sample)
${s}$ ç‚º è¼¸å…¥çš„åŠ›åº¦ ``--vl_str``


é™åˆ¶ï¼š`value >= 0`

### å‰ç½®æº–å‚™
ä½¿ç”¨ `main.py` å‰ï¼Œè«‹å…ˆå®Œæˆä»¥ä¸‹æ­¥é©Ÿï¼š

1. å°‡ `.wav`ã€`.mp4` æª”æ¡ˆæ”¾å…¥ `video_files` è³‡æ–™å¤¾ä¸­

2. è‡³å°‘é‹è¡Œä¸€æ¬¡ `RMS_generator.py`ï¼Œç”¨æ–¼ç”ŸæˆéŸ³è¨Šåˆ†æè³‡æ–™
```bash
python RMS_generator.py
```
æ­¤æª”æ¡ˆæœƒï¼š
- è®€å–ä¸¦åˆ†æ`.wav`æª”æ¡ˆ
- æŠ“`.wav`, `.mp4`æª”æ¡ˆçš„è·¯å¾‘(Path)
- è¨ˆç®—å½±ç‰‡é•·åº¦
> [!note]
> æ“·å–ã€åˆ†ææ™‚é–“ä¾æ­Œæ›²é•·åº¦æœ‰æ‰€ä¸åŒï¼Œé€šå¸¸éœ€è¦10~30ç§’ä¸ç­‰ã€‚

> [!Important]
> è‹¥æœ‰æ›´æ›éŸ³æª”æˆ–é‡æ–°å‘½åç­‰æ“ä½œï¼Œè«‹**é‡æ–°åŸ·è¡Œæœ¬æª”æ¡ˆ**ã€‚
> ä¸å»ºè­°æ‰‹å‹•ä¿®æ”¹ `sound_file.json`ï¼Œå¯èƒ½å°è‡´è³‡æ–™ä¸åŒæ­¥ã€‚

### å½±éŸ³ç›¸é—œæª”æ¡ˆ
1. è«‹å‚™å¦¥`.wav`ã€`.mp4`æª”æ¡ˆï¼Œå°‡æª”æ¡ˆæ”¾å…¥ `video_files` è³‡æ–™å¤¾ä¸­ï¼Œä¸é ˆæ”¹å
2. æ›´æ›èƒŒæ™¯è«‹æ”¾åœ¨å’Œ`main.py`çš„åŒç´šè³‡æ–™å¤¾ä¸­ï¼Œ**ä¸¦å°‡åœ–ç‰‡å‘½åç‚º`default_background.jpg`**

<h2>main.py</h2>

å®Œæˆå‰ç½®æº–å‚™å¾Œï¼Œå¯ç›´æ¥åŸ·è¡Œæœ¬æª”æ¡ˆ
```bash
python main.py
```
è¼¸å‡ºï¼š
- PyGameè¦–çª—
- çµ‚ç«¯æ©Ÿlog

é—œæ–¼è¨­å®šæª”`config.json`è«‹åƒé–±ä¸‹æ–¹èªªæ˜ã€‚

## è¨­å®šæª”
æœ¬å°ˆæ¡ˆè¨­å®šæª”ä½æ–¼å’Œmain.pyåŒç´šçš„`config.json`
### ğŸ“ é¡¯ç¤ºèˆ‡æ’­æ”¾è¨­å®š
| è¨­å®š | é™åˆ¶ | èªªæ˜ |
| --- | --- | --- | 
| enable_video | å¿…é ˆæ˜¯booleanå‹æ…‹ | æ˜¯å¦æ’­æ”¾.mp4æª”ï¼Œè‹¥é—œé–‰å°‡ä½¿ç”¨`default_background.jpg`ä½œç‚ºèƒŒæ™¯ |
| enable_audio | å¿…é ˆæ˜¯booleanå‹æ…‹ | æ˜¯å¦æ’­æ”¾.wavæª” |
| enable_bar | å¿…é ˆæ˜¯booleanå‹æ…‹ | æ˜¯å¦æ¸²æŸ“éŸ³æµª |
| volume | 0.0 â‰¤ value[float] â‰¤ 1.0 | è¨­å®šéŸ³é‡ï¼Œ1.0ç‚ºæœ€å¤§è²ï¼Œ0.0ç‚ºéœéŸ³ |
| smoothing | 0.0 â‰¤ value[float] â‰¤ 1.0 | æ³¢å‹çš„ç·©è¡å¹…åº¦ï¼Œæ•¸å­—è¶Šå¤§æ•´é«”çœ‹èµ·ä¾†è¶Š"æŠ–" |
| amplify | value[float] â‰¥ 0.0 | å°æ³¢å‹çš„æ•æ„Ÿåº¦è£œæ­£ã€‚æ•¸å­—è¶Šå¤§ï¼Œè¦–è¦ºé«˜ä¸Šè¼ƒé™¡å³­ï¼›æ•¸å­—è¶Šä½ï¼Œè¦–è¦ºä¸Šè¼ƒå¹³ç·© |

### ğŸ¨ å¤–è§€èˆ‡è¦–çª—è¨­å®š
| è¨­å®š | é™åˆ¶ | èªªæ˜ |
| --- | --- | --- | 
| bar_color | list[r, g, b] | æŒ‡å®šæ³¢æµªæ•´é«”çš„é¡è‰²
| bar_alpha | 0 â‰¤ value[int] â‰¤ 256 | æŒ‡å®šæ³¢æµªçš„é€æ˜åº¦ï¼Œ0ç‚ºå®Œå…¨é€æ˜ |
| bar_count | å¿…é ˆç‚º$300$çš„å› æ•¸ï¼Œå› æ‡‰FPSæ•´é™¤æ¡æ¨£ç‡(Sample Rate) | æŒ‡å®šç•«é¢ä¸Šçš„æ³¢æµªæ¢æ•¸é‡ |
| window_width | value[int] â‰¥ 0 | ä¸»è¦–çª—çš„å¯¬åº¦ |
| window_high | value[int] â‰¥ 0 | ä¸»è¦–çª—çš„é«˜åº¦ |
| bar_width | value[int] â‰¥ 0 | æ•´é«”æ³¢æµªçš„å¯¬åº¦ |
| bar_high | value[int] â‰¥ 0 | æ•´é«”æ³¢æµªçš„é«˜åº¦ |
| bar_x | value[int] â‰¥ 0 | æ³¢æµªçš„ä½ç½® $x$ |
| bar_y | value[int] â‰¥ 0 | æ³¢æµªçš„ä½ç½® $y$ |

> [!Note]
> æ³¢æµªä½ç½® $x,y$ æ˜¯ä»¥**ç•«é¢å·¦ä¸‹è§’ç‚º** ($0, 0$) çš„**ç¬¬ä¸€è±¡é™**

> [!Important]
> æ­¤æª”æ¡ˆæ²’æœ‰è‡ªå‹•è£œé½Š/ç”Ÿæˆè¨­å®šçš„åŠŸèƒ½ï¼Œè‹¥è¨­å®šé …æœ‰ç¼ºå¤±ï¼Œè«‹è¤‡è£½æœ¬å°ˆæ¡ˆ`config.json`çš„å…§å®¹

# å°ˆæ¡ˆçµæ§‹
```
SOUND_WAVES_VISUALIZER/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ video_files/               # æ”¾ç½®å½±ç‰‡èˆ‡éŸ³è¨Šç´ æï¼ˆ.wav / .mp4ï¼‰
â”‚   â”œâ”€â”€ config.json                # ä¸»è¨­å®šæª”ï¼Œèª¿æ•´è¦–è¦ºåŒ–æ¨£å¼èˆ‡æ’­æ”¾è¡Œç‚º
â”‚   â”œâ”€â”€ default_background.jpg     # é è¨­èƒŒæ™¯åœ–ï¼ˆè‹¥æœªä½¿ç”¨å½±ç‰‡ï¼‰
â”‚   â”œâ”€â”€ JsonLoader.py              # è¼‰å…¥ config.json èˆ‡ sound_file.json çš„å·¥å…·æ¨¡çµ„

https://github.com/user-attachments/assets/fe0aae75-5ef6-406a-9059-4ad35aa313a2


â”‚   â”œâ”€â”€ main.py                    # ä¸»åŸ·è¡Œæª”ï¼Œè¼‰å…¥è³‡æ–™ä¸¦é–‹å§‹è¦–è¦ºåŒ–å‹•ç•«
â”‚   â”œâ”€â”€ RMS_generator.py           # éŸ³è¨Šè³‡æ–™é è™•ç†è…³æœ¬ï¼Œåˆ†æéŸ³æª”ç”Ÿæˆè²éŸ³å¼·åº¦è³‡è¨Š
â”‚   â””â”€â”€ sound_file.json            # ç”± RMS_generator.py ç”Ÿæˆçš„éŸ³è¨Šåˆ†æè³‡æ–™
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ video_files/               # æ¸¬è©¦ç”¨éŸ³è¨Šèˆ‡å½±ç‰‡ç´ æè³‡æ–™å¤¾
â”‚   â”œâ”€â”€ config.json                # æ¸¬è©¦ç”¨è¨­å®šæª”
â”‚   â”œâ”€â”€ default_background.jpg     # æ¸¬è©¦ç”¨èƒŒæ™¯åœ–
â”‚   â”œâ”€â”€ JsonLoader.py              # æ¸¬è©¦ç‰ˆæœ¬çš„ Json è¼‰å…¥å·¥å…·
â”‚   â”œâ”€â”€ main.py                    # æ¸¬è©¦åŸ·è¡Œä¸»ç¨‹å¼
â”‚   â”œâ”€â”€ RMS_generator.py           # æ¸¬è©¦éŸ³è¨Šåˆ†ææ¨¡çµ„
â”‚   â””â”€â”€ sound_file.json            # æ¸¬è©¦ç”¢å‡ºçš„éŸ³è¨Šè³‡æ–™
â”‚
â”œâ”€â”€ .gitignore                     # Git å¿½ç•¥è¦å‰‡
â”œâ”€â”€ README.md                      # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶ï¼ˆä½ ç¾åœ¨æ­£åœ¨å¯«çš„ï¼‰
â”œâ”€â”€ requirements.txt               # Python ç›¸ä¾å¥—ä»¶åˆ—è¡¨

```
ç¨‹å¼é‹è¡Œä»¥ src/ ç‚ºä¸»ï¼Œtests/ å¯ç”¨æ–¼éš”é›¢æ¸¬è©¦æˆ–å‚™ä»½ã€‚

# Requirements
```
pygame
numpy
opencv-python
librosa
```

# Demo
*é€™éƒ¨å½±ç‰‡è¢«æˆ‘å£“åˆ°5mbï¼Œå¯èƒ½æœ‰äº›å¤±çœŸ
[åŸå½±ç‰‡ï¼šCrossâ€ Revolution (feat. LyuU) - HyuN - VOEZ](https://www.youtube.com/watch?v=y_9s5tX4UBw&list=RDy_9s5tX4UBw&start_radio=1)

https://github.com/user-attachments/assets/4119a900-e14f-4eee-85f8-34f8a23405de

